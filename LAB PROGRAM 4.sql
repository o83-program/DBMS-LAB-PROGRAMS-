create database student;
use student;
create table student(snum varchar(20),sname varchar(20),major varchar(20),level varchar(20),age int(20),primary key(snum));
insert into  student values('10','omar','cse','senior','20');
insert into  student values('15','vikas','ise','senior','19');
insert into student values('20','vishnu','ece','senior','21');
insert into student values('25','ibrahim','cse','junior','20');
insert into student values('30','owais','ece','junior','19');
select * from student;
create table faculty(fid varchar(20),fname varchar(20),dep_id varchar(20),primary key(fid));
insert into  faculty values('1001','Dr manjunath','100cse');
insert into  faculty values('1500','Dr selva kumar','100cse');
insert into faculty values('2042','Ashok','200ece');
insert into faculty values('2575','Nmaratha M','100cse');
insert into faculty values('3085','Malikarjuna','200ece');
create table class(cname varchar(20),meeting time(5),room varchar(20),fid varchar(20),primary key(cname),foreign key(fid)references faculty(fid)on delete cascade);
insert into  class values('class1','10:15:5','r1','1001');
insert into  class values('class2','11:00:00','r1','1500');
insert into class values('class3','12:00:09','r4','2042');
insert into class values('class4','1:30:15','r2','2575');
insert into class values('class5','3:00:33','r7','3085');
select * from class;
create table enrolled(snum varchar(20),cname varchar(20),primary key(snum,cname),foreign key(snum)references student(snum),foreign key(cname)references class(cname) on delete cascade);
insert into enrolled values('10','class1');
insert into enrolled values('15','class2');
insert into enrolled values('20','class3');
insert into enrolled values('25','class4');
insert into enrolled values('30','class5');
select * from enrolled;
select distinct s.sname from student s,faculty f,enrolled e,class c where s.snum=e.snum and e.cname=c.cname and c.fid=f.fid and f.fname='Nmaratha M' and s.level='junior';
select c.cname from class c where room='r1' or c.cname in(select e.cname from enrolled e group by e.cname having count(*)>=5);

select distinct f.fname from faculty f where (select count(e.snum) from class c,enrolled e where c.cname=e.cname and c.fid=f.fid)<5;
select distinct s.sname from student s where s.snum not in(select e.snum from enrolled e);
